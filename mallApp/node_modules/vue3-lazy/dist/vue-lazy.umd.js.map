{"version":3,"file":"vue-lazy.umd.js","sources":["../src/types/index.ts","../src/helpers/dom.ts","../src/helpers/loadImage.ts","../src/helpers/debug.ts","../src/core/imageManager.ts","../src/helpers/util.ts","../src/core/lazy.ts","../src/index.ts"],"sourcesContent":["export enum State {\n  loading,\n  loaded,\n  error\n}\n\nexport interface LazyOptions {\n  error?: string\n  loading?: string\n}\n\nexport interface ImageManagerOptions {\n  el: HTMLElement\n  parent: HTMLElement | Window\n  src: string\n  error: string\n  loading: string\n  cache: Set<string>\n}\n\nexport interface Target {\n  el: HTMLElement | Window\n  ref: number\n}\n\n","const inBrowser = typeof window !== 'undefined'\n\nexport const hasIntersectionObserver = checkIntersectionObserver()\n\nfunction checkIntersectionObserver (): boolean {\n  if (inBrowser &&\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in IntersectionObserverEntry.prototype) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/w3c/IntersectionObserver/issues/211\n    if (!('isIntersecting' in IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(IntersectionObserverEntry.prototype,\n        'isIntersecting', {\n          get: function (this: IntersectionObserverEntry) {\n            return this.intersectionRatio > 0\n          }\n        })\n    }\n    return true\n  }\n  return false\n}\n\nconst style = (el: HTMLElement, prop: string): string => {\n  return getComputedStyle(el).getPropertyValue(prop)\n}\n\nconst overflow = (el: HTMLElement): string => {\n  return style(el, 'overflow') + style(el, 'overflow-y') + style(el, 'overflow-x')\n}\n\nexport function scrollParent (el: HTMLElement): HTMLElement | Window {\n  let parent = el\n\n  while (parent) {\n    if (parent === document.body || parent === document.documentElement) {\n      break\n    }\n\n    if (!parent.parentNode) {\n      break\n    }\n\n    if (/(scroll|auto)/.test(overflow(parent))) {\n      return parent\n    }\n\n    parent = parent.parentNode as HTMLElement\n  }\n\n  return window\n}\n","export default function loadImage (src: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const image = new Image()\n\n    image.onload = function () {\n      resolve()\n      dispose()\n    }\n\n    image.onerror = function (e) {\n      reject(e)\n      dispose()\n    }\n\n    image.src = src\n\n    function dispose () {\n      image.onload = image.onerror = null\n    }\n  })\n}\n","export function warn (msg: string): void {\n  console.warn(`[Vue3-lazy warn]: ${msg}`)\n}\n","import { ImageManagerOptions, State } from '../types'\nimport loadImage from '../helpers/loadImage'\nimport { warn } from '../helpers/debug'\n\nexport default class ImageManager {\n  el: HTMLElement\n  parent: HTMLElement | Window\n  src: string\n  error: string\n  loading: string\n  cache: Set<string>\n  state: State\n\n  constructor (options: ImageManagerOptions) {\n    this.el = options.el\n    this.parent = options.parent\n    this.src = options.src\n    this.error = options.error\n    this.loading = options.loading\n    this.cache = options.cache\n    this.state = State.loading\n\n    this.render(this.loading)\n  }\n\n  load (next?: Function): void {\n    if (this.state > State.loading) {\n      return\n    }\n    if (this.cache.has(this.src)) {\n      this.state = State.loaded\n      this.render(this.src)\n      return\n    }\n    this.renderSrc(next)\n  }\n\n  isInView (): boolean {\n    const rect = this.el.getBoundingClientRect()\n    return rect.top < window.innerHeight && rect.left < window.innerWidth\n  }\n\n  update (src: string): void {\n    const currentSrc = this.src\n    if (src !== currentSrc) {\n      this.src = src\n      this.state = State.loading\n    }\n  }\n\n  private renderSrc (next?: Function): void {\n    loadImage(this.src).then(() => {\n      this.state = State.loaded\n      this.render(this.src)\n      this.cache.add(this.src)\n      next && next()\n    }).catch((e) => {\n      this.state = State.error\n      this.render(this.error)\n      warn(`load failed with src image(${this.src}) and the error msg is ${e.message}`)\n      next && next()\n    })\n  }\n\n  private render (src: string): void {\n    this.el.setAttribute('src', src)\n  }\n}\n","export function throttle (fn: Function, delay: number): Function {\n  let timeout = 0\n  let lastRun = 0\n  return function (this: void) {\n    if (timeout) {\n      return\n    }\n    const elapsed = Date.now() - lastRun\n    const context = this\n    const args = arguments\n    const runCallback = function () {\n      lastRun = Date.now()\n      timeout = 0\n      fn.apply(context, args)\n    }\n    if (elapsed >= delay) {\n      runCallback()\n    } else {\n      timeout = window.setTimeout(runCallback, delay)\n    }\n  }\n}\n","import { DirectiveBinding } from 'vue'\nimport { LazyOptions, State, Target } from '../types'\nimport { hasIntersectionObserver, scrollParent } from '../helpers/dom'\nimport ImageManager from './imageManager'\nimport { throttle } from '../helpers/util'\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n\nconst events = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove', 'transitioncancel']\n\nconst THROTTLE_DELAY = 300\n\nexport default class Lazy {\n  error: string\n  loading: string\n  cache: Set<string>\n  managerQueue: ImageManager[]\n  observer?: IntersectionObserver\n  targetQueue?: Target[]\n  throttleLazyHandler: Function\n\n  constructor (options: LazyOptions) {\n    this.error = options.error || DEFAULT_URL\n    this.loading = options.loading || DEFAULT_URL\n\n    this.cache = new Set()\n    this.managerQueue = []\n    this.throttleLazyHandler = throttle(this.lazyHandler.bind(this), THROTTLE_DELAY)\n\n    this.init()\n  }\n\n  add (el: HTMLElement, binding: DirectiveBinding): void {\n    const src = binding.value\n    const parent = scrollParent(el)\n\n    const manager = new ImageManager({\n      el,\n      parent,\n      src,\n      error: this.error,\n      loading: this.loading,\n      cache: this.cache\n    })\n\n    this.managerQueue.push(manager)\n\n    if (hasIntersectionObserver) {\n      this.observer!.observe(el)\n    } else {\n      this.addListenerTarget(parent)\n      this.addListenerTarget(window)\n      this.throttleLazyHandler()\n    }\n  }\n\n  update (el: HTMLElement, binding: DirectiveBinding): void {\n    const src = binding.value\n    const manager = this.managerQueue.find((manager) => {\n      return manager.el === el\n    })\n    if (manager) {\n      manager.update(src)\n    }\n  }\n\n  remove (el: HTMLElement): void {\n    const manager = this.managerQueue.find((manager) => {\n      return manager.el === el\n    })\n    if (manager) {\n      this.removeManager(manager)\n    }\n  }\n\n  private init (): void {\n    if (hasIntersectionObserver) {\n      this.initIntersectionObserver()\n    } else {\n      this.targetQueue = []\n    }\n  }\n\n  private initIntersectionObserver (): void {\n    this.observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const manager = this.managerQueue.find((manager) => {\n            return manager.el === entry.target\n          })\n          if (manager) {\n            if (manager.state === State.loaded) {\n              this.removeManager(manager)\n              return\n            }\n            manager.load()\n          }\n        }\n      })\n    }, {\n      rootMargin: '0px',\n      threshold: 0\n    })\n  }\n\n  private addListenerTarget (el: HTMLElement | Window): void {\n    let target = this.targetQueue!.find((target) => {\n      return target.el === el\n    })\n\n    if (!target) {\n      target = {\n        el,\n        ref: 1\n      }\n      this.targetQueue!.push(target)\n      this.addListener(el)\n    } else {\n      target.ref++\n    }\n  }\n\n  private removeListenerTarget (el: HTMLElement | Window): void {\n    this.targetQueue!.some((target, index) => {\n      if (el === target.el) {\n        target.ref--\n        if (!target.ref) {\n          this.removeListener(el)\n          this.targetQueue!.splice(index, 1)\n        }\n        return true\n      }\n      return false\n    })\n  }\n\n  private addListener (el: HTMLElement | Window): void {\n    events.forEach((event) => {\n      el.addEventListener(event, this.throttleLazyHandler as EventListenerOrEventListenerObject, {\n        passive: true,\n        capture: false\n      })\n    })\n  }\n\n  private removeListener (el: HTMLElement | Window): void {\n    events.forEach((event) => {\n      el.removeEventListener(event, this.throttleLazyHandler as EventListenerOrEventListenerObject)\n    })\n  }\n\n  private lazyHandler (e: Event): void {\n    for (let i = this.managerQueue.length - 1; i >= 0; i--) {\n      const manager = this.managerQueue[i]\n      if (manager.isInView()) {\n        if (manager.state === State.loaded) {\n          this.removeManager(manager)\n          return\n        }\n        manager.load()\n      }\n    }\n  }\n\n  private removeManager (manager: ImageManager): void {\n    const index = this.managerQueue.indexOf(manager)\n    if (index > -1) {\n      this.managerQueue.splice(index, 1)\n    }\n    if (this.observer) {\n      this.observer.unobserve(manager.el)\n    } else {\n      this.removeListenerTarget(manager.parent)\n      this.removeListenerTarget(window)\n    }\n  }\n}\n","import { App } from 'vue'\nimport { LazyOptions } from './types'\nimport Lazy from './core/lazy'\n\nconst lazyPlugin = {\n  install (app: App, options: LazyOptions) {\n    const lazy = new Lazy(options)\n\n    app.directive('lazy', {\n      mounted: lazy.add.bind(lazy),\n      updated: lazy.update.bind(lazy),\n      unmounted: lazy.update.bind(lazy)\n    })\n  }\n}\n\nexport default lazyPlugin\n"],"names":[],"mappings":"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"}